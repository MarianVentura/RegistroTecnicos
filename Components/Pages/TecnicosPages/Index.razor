@page "/Tecnico/index"
@inject TecnicoServices tecnicoServices
@inject NavigationManager navigationManager
@rendermode InteractiveServer

<PageTitle>Consulta Técnicos</PageTitle>

<EditForm Model="ListaTecnicos" class"border shadow-lg p-3 rounded">
    <div class="card-header bg-primary text-white text-center py-2 rounded">
        <h3 style="font-weight: bold;" class="mb-0 font-weight-bold">Consulta Técnicos</h3>
    </div>
    
   <div class="card-body">
       <div class="row">
           <div class="col-md-9"></div>
           <div class="col-md-3 text-end">
               <a href="Tecnico/Create" class="btn btn-success" type="button">
                   <i class="bi bi-pencil-square"></i>
                   Crear
                  </a>
           </div>
       </div>
   </div>

   <div class="table-responsive">
       <table class="table table-bordered text-center">
           <thead class="bg-primary text-white">
               <tr>
                   <th>TécnicoId</th>
                   <th>Nombre</th>
                   <th>SueldoHora</th>
                   <th>Detalle</th>
                   <th>Editar</th>
                   <th>Eliminar</th>
               </tr>
           </thead>
           <tbody>
                @foreach (var t in ListaTecnicos)
                {
                    <tr>
                        <td>@t.TecnicoId</td>
                        <td>@t.Nombre</td>
                        <td>@t.SueldoHora</td>
                        <td>
                            <a href="/Tecnico/Details/@t.TecnicoId" style="border: none; background-color: transparent;" class="btn-detalle">
                                <span class="bi bi-info-circle-fill" style="font-size: 2rem;"></span>
                                </a>
                        </td>

                        <td>
                            <a href="Tecnico/Edit/@t.TecnicoId" style="border: none; background-color: transparent;" class="btn-editar">
                               <span class="bi bi-pencil-square" style="font-size: 2rem"></span>
                               </a>
                        </td>
                        <td>
                            <button type="button" class="btn btn-danger ml-1" @onclick="() => IrEliminar(t.TecnicoId)">
                                <i class="bi bi-trash"></i>
                            </button>
                        </td>
                    </tr>
                }
            </tbody>
       </table>
   </div>

   <div class="card-footer text-start">
       <p>Total de Técnicos: @ListaTecnicos.Count</p>
   </div>
</EditForm>

@code {
    public List<Tecnicos> ListaTecnicos { get; set; } = new List<Tecnicos>();
    private string filtro = "id";
    private string valorfiltro = "";

    protected override async Task OnInitializedAsync()
    {
        ListaTecnicos = await tecnicoServices.Listar(t => true);
    }
    private async Task IrEliminar(int tecnicoId)
    {
        navigationManager.NavigateTo($"/Tecnicos/Delete/tecnicoId={tecnicoId}");
    }
}
